<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>OWASP Security Shepherd</title>

<!-- 
			You are currently looking at the core server. 
			Nothing related to the levels in Security Shepherd will be found in here. 
			You might be looking for the iframe embedded in the page. 
			Try a tool like Firebug to make this stuff easier.
			
			Security Shepherd Version: 3.0
		-->

<link href="css/theCss.css" rel="stylesheet" type="text/css" media="screen">
<link href="css/theResponsiveCss.css" rel="stylesheet" type="text/css" media="screen">
<link href="css/jquery.mCustomScrollbar.min.css" rel="stylesheet" type="text/css" media="screen">
<link rel="shortcut icon" href="https://192.168.137.3/root/grantComplete/unvalidatedredirectlesson?userid=2064489753 " type="image/jpeg">

</head>
<body>
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/jqueryUI.js"></script>
	<script type="text/javascript" src="js/jquery.mCustomScrollbar.concat.min.js"></script>
	<div id="wrapper">
		

			<form style="position:absolute;top: 0.5em;right: 0.5em">
				<select id="lang" name="lang" onchange="submit()">
					<option value="en">English</option>
					<option value="es">Español</option>
					<option value="fr">Français</option>
					<option value="pt">Português</option>
					<option value="ga">Gaeilge</option>
					<option value="zh">中文</option>
					<option value="hi">Hindi(Hinglish)</option>
				</select>
			</form>

		<div id="header">
			<h1>Security Shepherd</h1>
			<div style="position: absolute; top: 12px; right: 130px;">
				<p>
					<strong>admin&nbsp;|&nbsp;<a href="logout?csrfToken=-59712835247753819182404704116437225304">Logout</a></strong>
				</p>
			</div>
		</div>

		<div id="page">
			<div id="submitResult" style="display: block;">
				<form action="javascript:;" id="resultForm">
					<input type="hidden" id="currentModule" value="b6432a6b5022cb044e9946315c44ab262ab59e88">
					<table class="resultTable">
						<tbody><tr>
							<td class="resultBoxCell"><input type="text" id="moduleResult" class="resultbox" placeholder="Submit Result Key Here..." autocomplete="OFF"></td>
							<td class="submitResultCell"><div id="submitForm" style="display: block;">
									<input type="submit" value="Submit">
								</div>
								<div id="submitLoading" style="display: none;">
									Loading...
								</div></td>
						</tr>
					</tbody></table>
					<div id="resultResponse" style="display: none;"></div>
				</form>
				
			</div>
			<!-- You are currently looking at the core server. 
			Nothing related to the levels in Security Shepherd will be found in here. 
			You might be looking for the iframe embedded in the page. 
			Try a tool like Firebug to make this stuff easier. -->
			<div id="contentDiv" style="display: block;"><iframe class="levelIframe" id="theLesson" src="lessons/f15f2766c971e16e68aa26043e6016a0a7f6879283c873d9476a8e7e94ea736f.jsp" frameborder="no"></iframe></div>
			<div id="theSidebarWrapper" class="sidebarWrapper" onmouseover="resizeSidebar()" style="height: 2056px;">
				<div class="menuIcon">☰</div>
				<div id="sidebar">
					<ul>
						
						<li><a id="adminList" href="javascript:;"><div class="menuButton">
									Admin
								</div></a>
							<ul id="theAdminList" style="display: none;">
								<li><a id="configurationList" href="javascript:;">Configuration</a>
									<ul id="theConfigurationList" style="display: none;">
										<li><a id="aboutShepherdLink" href="javascript:;">About Security Shepherd</a></li>
										<li><a id="cheatSheetLink" href="javascript:;">Cheat Sheet Management</a></li>
										<li><a id="configureFeedbackLink" href="javascript:;">Feedback Configuration</a></li>
										<li><a id="registrationLink" href="javascript:;">Open/Close Registration</a></li>
										<li><a id="scoreboardLink" href="javascript:;">Scoreboard Configuration</a></li>
										<li><a id="setCoreDatabaseLink" href="javascript:;">Set Core Database</a></li>
									</ul></li>
								<li><a id="moduleManagementList" href="javascript:;">Module Management</a>
									<ul id="theModuleManagementList" style="display: none;">
										<li><a id="levelLayoutLink" href="javascript:;">Change Module Layout</a></li>
										<li><a id="moduleBlockLink" href="javascript:;">Module Block Setup</a></li>
										<li><a id="setModuleStatusLink" href="javascript:;">Open and Close Modules</a></li>
										<li><a id="openCloseByCategory" href="javascript:;">Open or Close by Category</a></li>
										<li><a id="feedbackLink" href="javascript:;">View Feedback</a></li>
										<li><a id="progressLink" href="javascript:;">View Progress</a></li>
									</ul></li>
								<li><a id="userManagementList" href="javascript:;">User Management</a>
									<ul id="theUserManagementList" style="display: none;">
										<li><a id="addPlayersLink" href="javascript:;">Add Players</a></li>
										<li><a id="deletePlayersLink" href="javascript:;">Delete Players</a></li>
										<li><a id="updatePlayerScoreLink" href="javascript:;">Add / Deduct Player Points</a></li>
										<li><a id="assignPlayersLink" href="javascript:;">Assign Players to Class</a></li>
										<li><a id="createNewClassLink" href="javascript:;">Create Class</a></li>
										<li><a id="createNewAdminLink" href="javascript:;">Create New Admin</a></li>
										<li><a id="changePlayerPasswordLink" href="javascript:;">Reset Password</a></li>
										<li><a id="setDefaultClassForRegistrationLink" href="javascript:;">Set Default Player Class</a></li>
										<li><a id="suspendPlayerLink" href="javascript:;">Suspend Player</a></li>
										<li><a id="unSuspendPlayerLink" href="javascript:;">Undo Suspend Player</a></li>
										<li><a id="upgradePlayersLink" href="javascript:;">Upgrade Player to Admin</a></li>
										<li><a id="downgradeAdminLink" href="javascript:;">Downgrade Admin to Player</a></li>
									</ul></li>
							</ul></li>
						
						
						<div id="scoreboardButton">
							<a id="showScoreboard" href="scoreboard.jsp" target="bar"><div class="menuButton">
									Scoreboard
								</div></a>
						</div>
						
						
						<div id="levelListDiv">
							<div id="sideMenuWrapper" style="display: block;"><li><a id="completedList" href="javascript:;"><div class="menuButton">Completed</div></a>
<ul id="theCompletedList" style="display: none;" class="levelList mCustomScrollbar _mCS_2 mCS_no_scrollbar"><div id="mCSB_2" class="mCustomScrollBox mCS-dark-thin mCSB_vertical mCSB_inside" style="max-height: 230px;" tabindex="0"><div id="mCSB_2_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px;" dir="ltr"><li><a class="lesson" id="0dbea4cb5811fff0527184f99bd5034ca9286f11" href="javascript:;">Insecure Direct Object References</a></li><li><a class="lesson" id="b9d82aa7b46ddaddb6acfe470452a8362136a31e" href="javascript:;">Poor Data Validation</a></li><li><a class="lesson" id="bf847c4a8153d487d6ec36f4fca9b77749597c64" href="javascript:;">Security Misconfiguration</a></li><li><a class="lesson" id="9533e21e285621a676bec58fc089065dec1f59f5" href="javascript:;">Broken Session Management</a></li><li><a class="lesson" id="52c5394cdedfb2e95b3ad8b92d0d6c9d1370ea9a" href="javascript:;">Failure to Restrict URL Access</a></li><li><a class="lesson" id="ca8233e0398ecfa76f9e05a49d49f4a7ba390d07" href="javascript:;">Cross Site Scripting</a></li><li><a class="lesson" id="cd7f70faed73d2457219b951e714ebe5775515d8" href="javascript:;">Cross Site Scripting 1</a></li><li><a class="lesson" id="201ae6f8c55ba3f3b5881806387fbf34b15c30c2" href="javascript:;">Insecure Cryptographic Storage</a></li><li><a class="lesson" id="408610f220b4f71f7261207a17055acbffb8a747" href="javascript:;">SQL Injection</a></li><li><a class="lesson" id="891a0208a95f1791287be721a4b851d4c584880a" href="javascript:;">Insecure Cryptographic Storage Challenge 1</a></li><li><a class="lesson" id="2dc909fd89c2b03059b1512e7b54ce5d1aaa4bb4" href="javascript:;">Insecure Direct Object Reference Challenge 1</a></li><li><a class="lesson" id="6be5de81223cc1b38b6e427cc44f8b6a28d2bc96" href="javascript:;">Poor Data Validation 1</a></li><li><a class="lesson" id="544aa22d3dd16a8232b093848a6523b0712b23da" href="javascript:;">SQL Injection 1</a></li><li><a class="lesson" id="a4bf43f2ba5ced041b03d0b3f9fa3541c520d65d" href="javascript:;">Session Management Challenge 1</a></li><li><a class="lesson" id="3d5b46abc6865ba09aaff98a8278a5f5e339abff" href="javascript:;">Failure to Restrict URL Access 1</a></li><li><a class="lesson" id="453d22238401e0bf6f1ff5d45996407e98e45b07" href="javascript:;">Cross Site Request Forgery</a></li></div><div id="mCSB_2_scrollbar_vertical" class="mCSB_scrollTools mCSB_2_scrollbar mCS-dark-thin mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer" style=""><div id="mCSB_2_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 30px; top: 0px;" oncontextmenu="return false;"><div class="mCSB_dragger_bar" style="line-height: 30px;"></div></div><div class="mCSB_draggerRail"></div></div></div></div></ul></li><li><a class="lesson" id="b6432a6b5022cb044e9946315c44ab262ab59e88" href="javascript:;"><div class="menuButton">Get Next Challenge</div></a></li></div>
						</div>
						
						<div id="menuRefreshLoadingDiv" style="display: none;"></div>
						<div>
							<input id="searchModules" class="moduleSearchBox ui-autocomplete-input" type="search" placeholder="Search Modules..." autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">
						</div>
						<div id="searchResults">
							<!-- Results from module search go here -->
						<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="z-index: 1; top: 0px; left: 0px; display: none;"></ul></div>
						<script>
							function makeSearchList() {
								//Make list for module search box
								console.log("Making Search List...");
								var availableModules = [];
								$(".lesson").each(function(index){
									availableModules.push($(this).text());
								}); //Make array out of available modules listed
								console.log(availableModules.length + " modules added to search list");
								$("#searchModules").autocomplete({
									source: availableModules,
									appendTo: "#searchResults"
								});
							}
							
							//Make Search List
							makeSearchList();
							
							$("#searchModules").on("autocompleteselect", function( event, ui ) {
								var toOpen = ui.item.value
								console.log("Opening: " + toOpen);
								$(".lesson").each(function(index){
									console.log($(this));
									if($(this).html().indexOf(toOpen) > -1){ //If the Level description exists in the lesson entry, then we have the right one
										console.log("Clicking lesson entry...");
										$(this).click();
										return false;
									}
								});
								console.log("Select Function Finish");
							});
							
							$("#searchModules").on("autocompleteopen", function( event, ui ) {
								console.log("Module Search Box Opened");
								$('#theSidebarWrapper').removeClass('sidebarWrapper').addClass("sidebarWrapperAlwaysOpen");
							});
							
							$("#searchModules").on("autocompleteclose", function( event, ui ) {
								console.log("Module Search Box Closed");
								$('#theSidebarWrapper').removeClass('sidebarWrapperAlwaysOpen').addClass("sidebarWrapper");
							});
						</script>
						<div id="startTimer">
							<!-- Countdown to start time -->
							<div id="startMessage"></div>
							<div id="startDays"></div>
							<div id="startHours"></div>
							<div id="startMinutes"></div>
							<div id="startSeconds"></div>
						</div>
						<div id="lockTimer">
							<!-- Countdown to lock time -->
							<div id="lockMessage"></div>
							<div id="lockDays"></div>
							<div id="lockHours"></div>
							<div id="lockMinutes"></div>
							<div id="lockSeconds"></div>
						</div>
						<div id="endTimer">
							<!-- Countdown to end time -->
							<div id="endMessage"></div>
							<div id="endDays"></div>
							<div id="endHours"></div>
							<div id="endMinutes"></div>
							<div id="endSeconds"></div>
						</div>
						<script>
						function makeTimer(prefix, endTime, message) {
					
							var endDateTime = new Date(endTime);			
							endDateTime = (Date.parse(endTime) / 1000);

							var now = new Date();
							now = (Date.parse(now) / 1000);

							var timeLeft = endDateTime - now;
							
							if(timeLeft < 0) {
								
								$("#" + prefix + "Message").html();
								$("#" + prefix + "Days").html();
								$("#" + prefix + "Hours").html();
								$("#" + prefix + "Minutes").html();
								$("#" + prefix + "Seconds").html();
								
								return;
							}

							$("#" + prefix + "Message").html(message);
							
							var days = Math.floor(timeLeft / 86400); 
							var hours = Math.floor((timeLeft - (days * 86400)) / 3600);
							var minutes = Math.floor((timeLeft - (days * 86400) - (hours * 3600 )) / 60);
							var seconds = Math.floor((timeLeft - (days * 86400) - (hours * 3600) - (minutes * 60)));
				  
							if (days > "0") {
								$("#" + prefix + "Days").html(days + "<span>Days</span>");
							} else {
								$("#" + prefix + "Days").html();								
							}
							
							if (hours > "0") {
								if (hours < "10") { 
									hours = "0" + hours; 
								}
								$("#" + prefix + "Hours").html(hours + "<span>Hours</span>");
							} else {
								$("#" + prefix + "Hours").html();
							}
							
							if (minutes > "0") {
								if (minutes < "10") { 
									minutes = "0" + minutes; 
								}
								$("#" + prefix + "Minutes").html(minutes + "<span>Minutes</span>");
							} else {
								$("#" + prefix + "Minutes").html();								
							}
							
							if (seconds > "0") {
								if (seconds < "10") { 
									seconds = "0" + seconds; 
								}
								$("#" + prefix + "Seconds").html(seconds + "<span>Seconds</span>");		
							} else {
								$("#" + prefix + "Seconds").html();		

							}
							}
							
							
							
						</script>
					</ul>
					<!-- You are currently looking at the core server. 
					Nothing related to the levels in Security Shepherd will be found in here. 
					You might be looking for the iframe embedded in the page. 
					Try a tool like Firebug to make this stuff easier. -->
				</div>
				<!-- End of Sidebar -->
			</div>
			<!-- End of Sidebar Wrapper -->
		</div>
	</div>
	<script>
		$("#contentDiv").load("getStarted.jsp", function(response, status, xhr) {
			if (status == "error") {
			var msg = "Sorry but there was an error: ";
			$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
		  }
		});
		</script>

	
	<script src="js/adminToggle.js"></script>
	<script>

			$("#updatePlayerScoreLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/givePoints.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#suspendPlayerLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/suspendUser.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#unSuspendPlayerLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/unSuspendUser.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#changePlayerPasswordLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/changeUserPassword.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#createNewAdminLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/createNewAdmin.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#createNewClassLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/createNewClass.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#addPlayersLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/addPlayers.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});
			
			$("#deletePlayersLink").click(function(){
			   $("#submitResult").slideUp("fast", function(){
			       $("#contentDiv").hide("fast", function(){
			           $("#contentDiv").load("admin/userManagement/deletePlayers.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
			             if (status == "error") {
			                   var msg = "Sorry but there was an error: ";
			                   $("#contentDiv").html("<p" + msg + xhr.status + " " + xhr.statusText + "</p");
			             }
			             $("#contentDiv").show("fast");
			           });
			       });
			   });
			});

			$("#assignPlayersLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/assignPlayers.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#setDefaultClassForRegistrationLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/setDefaultClassForRegistration.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#upgradePlayersLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/upgradePlayers.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});
			
			$("#downgradeAdminLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/userManagement/downgradeAdmins.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});			

			$("#feedbackLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/moduleManagement/feedback.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#setModuleStatusLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/moduleManagement/setStatus.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#openCloseByCategory").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/moduleManagement/openCloseByCategory.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});
				});	
			});

			$("#registrationLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/config/updateRegistration.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#progressLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/moduleManagement/classProgress.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#scoreboardLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/config/scoreboard.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#moduleBlockLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/moduleManagement/moduleBlock.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#setCoreDatabaseLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/config/setCoreDatabase.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});	
				});
			});

			$("#configureFeedbackLink").click(function(){
					$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/config/configFeedback.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});
				});	
			});
			
			$("#aboutShepherdLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/config/aboutShepherd.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});
				});	
			});
			
			$("#cheatSheetLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/config/configCheats.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});
				});	
			});
			
			$("#levelLayoutLink").click(function(){
				$("#submitResult").slideUp("fast", function(){
					$("#contentDiv").hide("fast", function(){
						$("#contentDiv").load("admin/moduleManagement/changeLevelLayout.jsp?csrfToken=\-59712835247753819182404704116437225304", function(response, status, xhr) {
						  if (status == "error") {
							var msg = "Sorry but there was an error: ";
							$("#contentDiv").html("<p>" + msg + xhr.status + " " + xhr.statusText + "</p>");
						  }
						  $("#contentDiv").show("fast");
						});
					});
				});	
			});
			</script>
	

	<script>
			function applyMenuButtonActionsOpenOrTourney(theCsrfToken, theErrorMessage){
				console.log("Applying Menu Actions For Open/Tourney");
				
				$(".challenge").click(function(){
					var whatFile = $(this).attr('id');
					$("#currentModule").val(whatFile);
					var theActualFile = "";
					$("#solutionDiv").hide("fast");
					$("#contentDiv").slideUp("slow", function(){
						var ajaxCall = $.ajax({
							type: "POST",
							url: "getModule",
							data: {
								moduleId: whatFile,
								csrfToken: theCsrfToken
							},
							async: false
						});
						if(ajaxCall.status == 200)
						{
							theActualFile = ajaxCall.responseText;
							$('#contentDiv').html("<iframe frameborder='no' class='levelIframe' id='theChallenge' src='" + theActualFile + "'></iframe>");
							$("#theChallenge").load(function(){
								
									$("#submitResult").slideDown("fast", function(){
										$("#contentDiv").slideDown("slow", function(){
											var scrollTo = $("#moduleResult").offset().top;
											scrollTo = scrollTo - 60;
											console.log("Scroll Up to: " + scrollTo);
											$('html, body').animate({
												scrollTop: scrollTo
											}, 1000);
										});
									});
								
							}).appendTo('#contentDiv');
							$("#theSidebarWrapper").height($("#contentDiv").height());
						}
						else
						{
							$('#contentDiv').html("<p> Sorry but there was an error: " + ajaxCall.status + " " + ajaxCall.statusText + "</p>");
							$("#contentDiv").slideDown("slow");
						}
					});
				});	
		
				$(".lesson").click(function(){
					var whatFile = $(this).attr('id');
					$("#currentModule").val(whatFile);
					var theActualFile = "";
					$("#solutionDiv").hide("fast");
					$("#contentDiv").slideUp("slow", function(){
						var ajaxCall = $.ajax({
							type: "POST",
							url: "getModule",
							data: {
								moduleId: whatFile,
								csrfToken: theCsrfToken
							},
							async: false
						});
						if(ajaxCall.status == 200)
						{
							theActualFile = ajaxCall.responseText;
							$('#contentDiv').html("<iframe frameborder='no' class='levelIframe' id='theLesson' src='" + theActualFile + "'></iframe>");
							$("#theLesson").load(function(){
							
								$("#submitResult").slideDown("fast", function(){
									$("#contentDiv").slideDown("slow", function(){
										var scrollTo = $("#moduleResult").offset().top;
										scrollTo = scrollTo - 60;
										console.log("Scroll Up to: " + scrollTo);
										$('html, body').animate({
											scrollTop: scrollTo
										}, 1000);
									});
								});
							
							}).appendTo('#contentDiv');
							$("#theSidebarWrapper").height($("#contentDiv").height());
						}
						else
						{
							$('#contentDiv').html("<p> Sorry but there was an error: " + ajaxCall.status + " " + ajaxCall.statusText + "</p>");
							$("#contentDiv").slideDown("slow");
						}
					});
				});
			}
			
			function applyMenuButtonActionsCtfMode(theCsrfToken, theErrorMessage){
				console.log("Applying JS Functions to Incremental Menu Buttons");
				
				$("#completedList").click(function () {
					$("#theCompletedList").toggle("slow");
					$("#theUncompletedList").hide("fast");
					$("#theAdminList").hide("fast");
				});
		
				$("#uncompletedList").click(function () {
					$("#theUncompletedList").toggle("slow");
					$("#theCompletedList").hide("fast");
					$("#theAdminList").hide("fast");
				});
		
				$(".lesson").click(function(){
					var whatFile = $(this).attr('id');	
					$("#currentModule").val(whatFile);	
					var theActualFile = "";	
					$("#solutionDiv").hide("fast");	
					$("#contentDiv").slideUp("slow", function(){
						var ajaxCall = $.ajax({
							type: "POST",
							url: "getModule",
							data: {
								moduleId: whatFile,
								csrfToken: theCsrfToken
							},
						async: false
						});
						if(ajaxCall.status == 200) {
							theActualFile = ajaxCall.responseText;
							$('#contentDiv').html("<iframe frameborder='no' class='levelIframe' id='theLesson' src='" + theActualFile + "'></iframe>");
							$("#theLesson").load(function(){
								
									$("#submitResult").slideDown("fast", function(){
										$("#contentDiv").slideDown("slow", function(){
											var scrollTo = $("#moduleResult").offset().top;
											scrollTo = scrollTo - 60;
											console.log("Scroll Up to: " + scrollTo);
											$('html, body').animate({
												scrollTop: scrollTo
											}, 1000);
										});
									});
								
							}).appendTo('#contentDiv');
						} else {
							$('#contentDiv').html("<p> " + theErrorMessage + ": " + ajaxCall.status + " " + ajaxCall.statusText + "</p>");
							$("#contentDiv").slideDown("slow");
						}
					});
				});
			}
		
			applyMenuButtonActionsCtfMode('-59712835247753819182404704116437225304', "Sorry but there was an error");
		
		
		//RefreshModuleFormScript
		function refreshSideMenu(theCsrfToken, localErrorMessage){
			$("#menuRefreshLoadingDiv").show("fast");
			$("#sideMenuWrapper").slideUp("fast", function(){
				var ajaxCall = $.ajax({
					type: "POST",
					url: "refreshMenu",
					data: {
						csrfToken: theCsrfToken
					},
					async: false
				});
				$("#menuRefreshLoadingDiv").slideUp("fast", function(){
					if(ajaxCall.status == 200)
					{
						$("#sideMenuWrapper").html(ajaxCall.responseText);
					}
					else
					{
						$("#sideMenuWrapper").append("<br/><font color='red'>" + localErrorMessage + ": " + ajaxCall.status + "</font>");
					}
					$('#sideMenuWrapper').slideDown('slow');
				});
			});
		}

		$("#resultForm").submit(function(){
			var theKey = $("#moduleResult").val();
			var theModuleId = $("#currentModule").val();
			if(theKey != null)
			{
				$("#submitLoading").slideDown("fast");
				$("#solutionDiv").slideUp("fast");
				$("#resultResponse").slideUp("fast");
				$("#submitForm").slideUp("fast");
				//The Ajax Operation
				$("#contentDiv").slideUp("fast", function(){
					var ajaxCall = $.ajax({
						type: "POST",
						url: "solutionSubmit",
						data: {
							moduleId: theModuleId,
							solutionKey: theKey,
							csrfToken: "-59712835247753819182404704116437225304"
						},
						async: false
					});
					$("#submitLoading").slideUp("fast", function(){
						if(ajaxCall.status == 200)
						{
							console.log("Request OK. Showing Reponse");
							$('#contentDiv').html(ajaxCall.responseText);
						}
						else
						{
							$('#resultResponse').html("<br/><p> Sorry but there was an error: " + ajaxCall.status + " " + ajaxCall.statusText + "</p><br/>");
							$("#resultResponse").show("slow");
						}
						$("#moduleResult").val("");
						$("#submitForm").slideDown("slow");
						$("#contentDiv").slideDown("slow");
					});
				});
			}
			else
			{
				console.log("No Key Submitted");
			}
		});
		
		
		$(".successAlert").click(function() {
			alert("successAlert click");
			$(this).hide("slide", {
				direction : "left"
			}, 1000);
		});

		$(".errorAlert").click(function() {
			$(this).hide("slide", {
				direction : "left"
			}, 1000);
		});

		function openFloorToggleFunctions() {
			console.log("Enabling Open Floor Toggle Funtions");

			$("#lessonList").click(function() {
				$("#theLessonList").toggle("slow");
				$("#theChallengeList").hide("fast");
				$("#theAdminList").hide("fast");
			});

			$("#challengeList").click(function() {
				$("#theChallengeList").toggle("slow");
				$("#theLessonList").hide("fast");
				$("#theAdminList").hide("fast");
			});

			$(".challengeHeader").click(function() {
				$(".challengeList").hide("fast");
				$(this).parent().find(".challengeList").show("slow");
			});
		}
		openFloorToggleFunctions();

		function tournamentToggleFunctions() {
			console.log("Enablig Tournament Toggle Functions");

			$("#fieldTrainingList").click(function() {
				$("#theFieldTrainingList").toggle("slow");
				$("#theCorporalList").hide("fast");
				$("#theSergeantList").hide("fast");
				$("#theMajorList").hide("fast");
				$("#theAdmiralList").hide("fast");
				$("#thePrivateList").hide("fast");
				$("#theLieutenantList").hide("fast");
			});

			$("#privateList").click(function() {
				$("#thePrivateList").toggle("slow");
				$("#theCorporalList").hide("fast");
				$("#theSergeantList").hide("fast");
				$("#theMajorList").hide("fast");
				$("#theAdmiralList").hide("fast");
				$("#theFieldTrainingList").hide("fast");
				$("#theLieutenantList").hide("fast");
			});

			$("#corporalList").click(function() {
				$("#theCorporalList").toggle("slow");
				$("#theFieldTrainingList").hide("fast");
				$("#theSergeantList").hide("fast");
				$("#theMajorList").hide("fast");
				$("#theAdmiralList").hide("fast");
				$("#thePrivateList").hide("fast");
				$("#theLieutenantList").hide("fast");
			});

			$("#sergeantList").click(function() {
				$("#theSergeantList").toggle("slow");
				$("#theFieldTrainingList").hide("fast");
				$("#theCorporalList").hide("fast");
				$("#theMajorList").hide("fast");
				$("#theAdmiralList").hide("fast");
				$("#thePrivateList").hide("fast");
				$("#theLieutenantList").hide("fast");
			});

			$("#lieutenantList").click(function() {
				$("#theLieutenantList").toggle("slow");
				$("#theFieldTrainingList").hide("fast");
				$("#theCorporalList").hide("fast");
				$("#theSergeantList").hide("fast");
				$("#theAdmiralList").hide("fast");
				$("#thePrivateList").hide("fast");
				$("#theMajorList").hide("fast");
			});

			$("#majorList").click(function() {
				$("#theMajorList").toggle("slow");
				$("#theFieldTrainingList").hide("fast");
				$("#theCorporalList").hide("fast");
				$("#theSergeantList").hide("fast");
				$("#theAdmiralList").hide("fast");
				$("#thePrivateList").hide("fast");
				$("#theLieutenantList").hide("fast");
			});

			$("#admiralList").click(function() {
				$("#theAdmiralList").toggle("slow");
				$("#theFieldTrainingList").hide("fast");
				$("#theCorporalList").hide("fast");
				$("#theSergeantList").hide("fast");
				$("#theMajorList").hide("fast");
				$("#thePrivateList").hide("fast");
				$("#theLieutenantList").hide("fast");
			});
		}
	
		function resizeSidebar() {
			//Make Sidebar as Long as Page
			if ($("#contentDiv").height() > 700) {
				console.log("Updating Sidebar Length to "
						+ $("#contentDiv").height());
				$("#theSidebarWrapper").height($("#contentDiv").height());
			} else {
				console.log("Setting Sidebar to 130% because  "
						+ $("#contentDiv").height() + "px is too short.");
				$("#theSidebarWrapper").height("130%");
			}
		}
	</script>
	<script>
		(function($) {
			$(window).load(function() {
				console.log("Initialising Custom Scrollbars (If Any)");
				$(".levelList").mCustomScrollbar({
					theme : "dark-thin",
					mouseWheel : {
						scrollAmount : 120
					}
				});
			});
		})(jQuery);

		function startScrollsBars() {
			console.log("Initialising Custom Scrollbars Again (If Any)");
			$(".levelList").mCustomScrollbar({
				theme : "dark-thin",
				mouseWheel : {
					scrollAmount : 120
				}
			});
		}
	</script>
	<!-- You are currently looking at the core server. 
		Nothing related to the levels in Security Shepherd will be found in here. 
		You might be looking for the iframe embedded in the page. 
		Try a tool like Firebug to make this stuff easier. -->
	



</body></html>
